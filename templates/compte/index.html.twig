{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}

{% block body %}


	<h2>Bonjour</h2>
	<h1>
		{{user.nom}}
		{{user.prenom}}</h1>
	<p>
		{{user.email}}</p>
	<button type='button' onclick="location.href='{{path('app_compte_edit')}}';">Param√®tre du compte</button>

	<h2>Derniers achats</h2>
	<table class="table">
		<thead>
			<tr>
				<th>Voyage</th>
				<th>Planning</th>
				<th>Prix</th>
			</tr>
		</thead>
		<tbody>
			{% for achat in user.achat|filter(achat => achat.status == 'bought') %}
				<tr>
					<td>{{ achat.produit }}</td>
					<td>Du
						{{ achat.planning.DateDepart | date("d/m/Y") }}
						- au
						{{achat.planning.DateFin | date("d/m/Y")}}</td>
					<td>{{ achat.prix }}</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="3">Aucun achat fait</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>
	<button type='button' onclick="location.href='{{path('app_compte_achat')}}';">Voir plus</button>

	{% if is_granted('ROLE_EMP') %}
		{% else %}
			<a href="{{ path('app_message') }}">
				<button>Contacter un conseiller</button>
			</a>
	{% endif %}
{% endblock %}
